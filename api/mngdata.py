import firebase_admin
from firebase_admin import credentials, db
from os import environ
from base64 import b64decode
from json import loads

JSON_CREDS = loads(b64decode("ew0KICAgICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsDQogICAgInByb2plY3RfaWQiOiAic2FmZWFwaS1kYXRhYmFzZSIsDQogICAgInByaXZhdGVfa2V5X2lkIjogImUwZGYwZjVjZWRmNjM3MjBkYTFlZDY4YmFkY2U0YjA3ZmYyOTM2NDciLA0KICAgICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQzAxaFJrSkZPcDUzUXhcbk1qY3krcDBrQTBNUTlBbStTdWIyb0U1N0RpWlJEOUo2enNHUmdlS3lCZ0NnQjA4WXg1M1NlUWhBbmZkMGVxTURcbnhJb0lwMDk2VW94WTNqMUlDWmlPcm8wOWxMbDZIWVovL1NBdkdQcGRoeFZiWlFWd3ZjU21LTnNtNUZsbVg4eHFcbkNRR3JuWHNGWm16UHIxeTZ0WGhzZklTOStocXVCek9oVzdSVWM0R1BjUGd4WWxUbnhaZ1BWQWVJOSs0aFlMdGpcbnptNUdiSFZhNWxIcUsrWE4rVXNYbTlyUFp4ME9lUkJjdmc1VGUxeWMzM252VElJWm44cWNlNlBGVkVkN3EwbmJcbnlHMnpyWW1qYjJoYzVsQ00vSTNEdk5hUkdFcTF4Y2ZWOGY5b0NhTjM1bXZwTXRySU5PaW03NXdVTWcwQkZrZTFcblhmMDFaWlQzQWdNQkFBRUNnZ0VBQWpOb3lvV2REdzBaUmJabmltQVhQa3oxZG1UMUl2KytYa0J0TkJiOW1HUERcblRtbTNYSkg4R3JhTXljd3pYOVhVZnE5Q2FBMVE2YWt4T3JOUFBmTzRIK2RpNHE3TFZPK0NqODB1YjZ2VHN0bVJcbkkrSnN3cVg2WDZxZm1sRW1Cd0J1cFExeVBWbFZUVFFPM210L1BiVU1KS1BocllpWE9yZ1YzK2p0cEtWMEwwVXpcbmgzL1lyVWJTaXVmQXY5ellkNTR2aUN6cmdhOTBzSTZ5clN2aEI5eUFzZ2tmODI1VXRjekVkZ1NqUXpPblhNNGpcbm5hT3NIZU90RWRnM0tHcW9wY21obUl5Vjk0U29hS1ZKY3R3blBMR0Z2b2hOU05Oc2pzKzhpYzlDNVFEZHB6b0JcbldBWkhvNm5VNllpa3ZtNnAxZWYzWjJQT0psZXJkclMvMW1OZFk2YVJvUUtCZ1FEYlJuUlJadXk4YVRGMEE2MklcbjBPMjE3bG1CVTVPeEVBODBkZFlhSmxmYzNPTGpMWGVnNzkvNGVZeVlZNnFnclJnUXcrRFA2L0J1VjBsS08wd1JcbjVGM2tESkJvcERSMHp3RjliUmdoRnF3ZWFRY0laNWF6OWk5NXdxTFRPamJYVSsvK0tnVHRvQ3g2bnpxOThJREZcbnk4WVVLTkR0SXY1Uy82bTlMSnNIR3BaRjVRS0JnUURUSDRpVTVQVDdpekUvZk1zSHhKaDZKam5LczBrSFpmNFFcbjIyN0RZK09oYjA2S3piQmZSZCtZRkJQNzNFcnd6b213bFQyOVF1UWJmU1p0SUFoUU9hbFI5bkMyMi9zZzArc2RcbnlBdExEc1NOWEdvN0lvZ3JxYlVtZ2xKR3lQYXVKeVR5WEREMjkyaG1yTWJ2dnBsWWx6TmFPRWFBakRpSi8wMHJcblN1RVRMZE1CcXdLQmdIZFA0c0xZU2tCS3pNbmZwbkVubmZDOGZKOU9KckxWbGpCcFhkSmt3ckkrem9YbW00MUtcbmVJZnZPMzAvM2Z3SHMyeUw2S3U2S2QwZ1NaVEdweUdsTFNHRlpKNUxtdTlrSTk5bm1SV0lES2VQWm5CQVRWUW1cbnhMWndIY0Rwa0NXaVdwZmxyVURQUXVTRjk2U2FWTGRMcGNBYVpYUmk4aGVmWFhDOThLenczb3V4QW9HQWF2T2VcbmpVOHZpLzZIaEZJRHlIdWZnc0c2cFNVTjZlR1JRNWptRTdXV3EwRm4ySWs2d0FqMXJHVC9lcWV1ank4U01aSnBcbkpHZXVodjV2YVBqQlBXTDRrN3owZks0VUdoMUJEbVU0MDEwMzFTVHI2K2tpY253V2VOdXNNbys3NTUyTTZmb3FcbkUvSmh3U0hsNWEzNG9SaDN1MHltNnBnZVRFbzVIYVZoUUFZR3p1RUNnWUIwM0duakRIR0NNUi9KcHRja0ZxU2pcbkRGcUNZb1UyNzZvUFpnY3ZWVHNma2lEUU5nWWRrRGJtZndzZkVhRCsveGIvWE1xRE1wNTFwWm9EUkl2V3pxWXRcbm1CK2cvVjRtRzYxalNJbmJ0MFVNMlBqZzFDSHF0aHdVREZrL0JmSWo5ckwrVTZSQk9qVm0yU0tocmJqSVpOMzNcbk1DTVdTNElxM2N2ejEwY1hXRlloaVE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwNCiAgICAiY2xpZW50X2VtYWlsIjogImZpcmViYXNlLWFkbWluc2RrLTAxbm50QHNhZmVhcGktZGF0YWJhc2UuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLA0KICAgICJjbGllbnRfaWQiOiAiMTA0MDUxOTg3OTc5ODI4OTYxOTQ1IiwNCiAgICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLA0KICAgICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLA0KICAgICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwNCiAgICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9maXJlYmFzZS1hZG1pbnNkay0wMW5udCU0MHNhZmVhcGktZGF0YWJhc2UuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iDQp9").decode())

cred = credentials.Certificate(JSON_CREDS)
firebase_admin.initialize_app(cred, {
    "databaseURL": "https://safeapi-database-default-rtdb.asia-southeast1.firebasedatabase.app/"
})

store = db.reference("/keystores")

def create(key, val):
    if store.child(key).get()==None:
        store.update({key: val})
        return True
    else:
        return False

def get(key):
    value = store.child(key).get()
    if value!=None:
        return value
    else:
        return False

def update(key, val):
    if store.child(key).get() != None:
        store.update({key : val})
        return True
    else:
        return False

def delete(key):
    if store.child(key).get() != None:
        store.child(key).delete()
        return True
    else:
        return False
